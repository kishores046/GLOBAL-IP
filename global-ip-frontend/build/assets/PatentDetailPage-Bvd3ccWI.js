import{e as V,u as E,j as e,y as W,r as n,p as v,b as y}from"./index-BbdKGyFO.js";import{N as k,S as C}from"./Sidebar-i27tk-Tt.js";import{A as T}from"./arrow-right-BzKSIZb_.js";import{C as _,R as K,T as O,a as G}from"./TrackingModal-DsvBq6Mw.js";import{A as P}from"./arrow-left-CcfEOmOD.js";import{F as S}from"./file-text-CZhUgEQo.js";import{m as d}from"./proxy-D3LmmJeF.js";import{C as q}from"./check-DbG3oPzS.js";import{S as H}from"./star-B5e_Bjz_.js";import{C as J}from"./calendar-DIk46_Ka.js";import{U as D}from"./users-D5aJHt4s.js";import{B as Q}from"./building-DYb4Ex7D.js";import{C as X}from"./chevron-down-CAl0sHJA.js";import"./search-BeavGINr.js";import"./chart-column-ulK0xHEq.js";import"./download-5qXpfTS0.js";import"./x-BD8jR-FZ.js";import"./circle-alert-DdFSup5D.js";import"./circle-check-big-CAMtQ4aA.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Z=V("chevron-up",Y);function ee({citationNetwork:i,patentId:m,source:t}){const x=E();if(t!=="PATENTSVIEW"||!i)return null;const b=i.totalBackwardCitations||i.backwardCitations?.filter(a=>a.citedPatent).length||0,r=i.totalForwardCitations||i.forwardCitations?.filter(a=>a.citingPatent).length||0;console.log("ðŸ“‹ Citation Summary Data:",{patentId:m,backwardCount:b,forwardCount:r,backwardCitations:i.backwardCitations?.map(a=>({patent:a.citedPatent,title:a.title})),forwardCitations:i.forwardCitations?.map(a=>({patent:a.citingPatent,title:a.title}))});const o=i.backwardCitations?.slice(0,5)||[],h=()=>{x(`/analyst/visualization?patentId=${m}&view=citations`)},u=a=>{x(`/patents/${a}`)};return e.jsxs("div",{className:"bg-white/70 backdrop-blur-xl rounded-2xl p-8 border border-blue-200/50 shadow-xl",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-blue-900 mb-6 flex items-center gap-2",children:[e.jsx(k,{className:"w-6 h-6"}),"Citations"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Prior Art (Backward)"}),e.jsx("div",{className:"text-3xl font-bold text-slate-900",children:b})]}),e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Cited By (Forward)"}),e.jsx("div",{className:"text-3xl font-bold text-slate-900",children:r})]})]}),e.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsx("p",{className:"text-sm text-slate-700",children:r===0?e.jsx(e.Fragment,{children:"This patent has not yet been cited by later patents. This is common for newly granted or specialized patents."}):r>10?e.jsxs(e.Fragment,{children:["This patent has strong forward citation impact with ",r," later patents citing this work, indicating significant influence in the field."]}):e.jsxs(e.Fragment,{children:["This patent has been cited by ",r," later patent",r!==1?"s":"","."]})})}),o.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:["Cited Patents (showing ",Math.min(o.length,5)," of ",b,")"]}),e.jsx("div",{className:"space-y-2",children:o.map((a,p)=>{const c=a.citedPatent;return c?e.jsx("button",{onClick:()=>u(c),className:"w-full text-left p-3 bg-white border border-slate-200 rounded-lg hover:border-blue-400 hover:bg-blue-50/50 transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-mono text-sm text-blue-600 font-medium",children:c}),a.title&&e.jsx("div",{className:"text-xs text-slate-600 mt-1 line-clamp-1",children:a.title})]}),e.jsx(T,{className:"w-4 h-4 text-slate-400"})]})},p):null})})]}),e.jsxs("button",{onClick:h,className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2 font-medium",children:[e.jsx(k,{className:"w-5 h-5"}),"View Citation Network",e.jsx(T,{className:"w-5 h-5"})]}),e.jsx("p",{className:"text-xs text-slate-500 text-center mt-2",children:"Explore interactive citation visualization (experimental)"})]})}function Ne(){const{publicationNumber:i}=W(),m=E(),[t,x]=n.useState(null),[b,r]=n.useState(!0),[o,h]=n.useState(null),[u,a]=n.useState(!1),[p,c]=n.useState(!1),[g,A]=n.useState(!1),[I,w]=n.useState(!1),[j,F]=n.useState(!1);n.useEffect(()=>{L()},[i]);const B=s=>{console.error("Error loading patent details:",s);const l=s.response?.status===404?"Patent details are available only for items returned in search results.":"Failed to load patent details. Please try again.";h(l)},L=async()=>{if(!i){h("No publication number provided"),r(!1);return}r(!0),h(null);try{const s=await v.getDetail(i);x(s)}catch(s){B(s)}finally{r(!1)}},R=async s=>{const l=t?.source||"PATENTSVIEW";s?await v.unbookmark(t.publicationNumber):await v.bookmark(t.publicationNumber,l)},$=async()=>{if(t){a(!0);try{await R(t.bookmarked),x({...t,bookmarked:!t.bookmarked})}catch(s){console.error("Error toggling bookmark:",s),alert("Failed to update bookmark. Please try again.")}finally{a(!1)}}},M=()=>{t&&(navigator.clipboard.writeText(t.publicationNumber),c(!0),setTimeout(()=>c(!1),2e3))},z=()=>{F(!0)},f=s=>{if(!s)return"â€”";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return s}},U=s=>{const l=s.match(/cpc_(?:group|subclass)\/([^\/]+)\/?/);return l?.[1]?l[1].replace(/:/g,"/"):s},N=t?.abstract||t?.abstractText;return b?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-blue-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(y,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading patent details..."})]})}):o||!t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-blue-100",children:e.jsxs("div",{className:"flex",children:[e.jsx(C,{}),e.jsx("main",{className:"flex-1 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("button",{onClick:()=>m(-1),className:"mb-6 flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors",children:[e.jsx(P,{className:"w-5 h-5"}),"Back to Results"]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-xl rounded-2xl p-12 border border-red-200 shadow-lg text-center",children:[e.jsx(S,{className:"w-16 h-16 text-red-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-2",children:"Error Loading Patent"}),e.jsx("p",{className:"text-slate-600",children:o})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-blue-100",children:e.jsxs("div",{className:"flex",children:[e.jsx(C,{}),e.jsx("main",{className:"flex-1 p-8 overflow-y-auto",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsxs("button",{onClick:()=>m(-1),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors",children:[e.jsx(P,{className:"w-5 h-5"}),"Back to Results"]}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-xl rounded-2xl p-8 border border-blue-200/50 shadow-xl",children:e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-900 mb-3",children:t.title||"Patent Details"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-xl text-slate-700 font-mono font-medium",children:t.publicationNumber}),e.jsx("button",{onClick:M,className:"p-2 hover:bg-blue-100 rounded-lg transition-colors",title:"Copy publication number",children:p?e.jsx(q,{className:"w-4 h-4 text-green-600"}):e.jsx(_,{className:"w-4 h-4 text-slate-500"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:t.jurisdiction}),t.source&&e.jsx("span",{className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium",children:t.source})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>w(!0),disabled:j,className:`px-4 py-3 rounded-xl transition-all shadow-md hover:shadow-lg font-medium text-sm flex items-center gap-2 ${j?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700 hover:bg-blue-200"} disabled:opacity-50`,title:"Track this patent's lifecycle",children:[e.jsx(K,{className:"w-4 h-4"}),j?"Tracking Enabled":"Track Patent"]}),e.jsx("button",{onClick:$,disabled:u,className:`p-4 rounded-xl transition-all shadow-md hover:shadow-lg ${t.bookmarked?"bg-yellow-100 text-yellow-600 hover:bg-yellow-200":"bg-slate-100 text-slate-400 hover:bg-slate-200"} disabled:opacity-50`,title:t.bookmarked?"Remove bookmark":"Add bookmark",children:u?e.jsx(y,{className:"w-6 h-6 animate-spin"}):e.jsx(H,{className:`w-6 h-6 ${t.bookmarked?"fill-current":""}`})})]})]})}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/70 backdrop-blur-xl rounded-2xl p-8 border border-blue-200/50 shadow-xl",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-blue-900 mb-6 flex items-center gap-2",children:[e.jsx(J,{className:"w-6 h-6"}),"Metadata"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Filing Date"}),e.jsx("p",{className:"text-slate-900 font-medium",children:f(t.filingDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Grant Date"}),e.jsx("p",{className:"text-slate-900 font-medium",children:f(t.grantDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Publication Date"}),e.jsx("p",{className:"text-slate-900 font-medium",children:f(t.publicationDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"WIPO Kind"}),e.jsx("p",{className:"text-slate-900 font-medium",children:t.wipoKind||"â€”"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Times Cited"}),e.jsx("p",{className:"text-slate-900 font-medium",children:t.timesCited??"â€”"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Total Citations"}),e.jsx("p",{className:"text-slate-900 font-medium",children:t.totalCitations??"â€”"})]})]})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/70 backdrop-blur-xl rounded-2xl p-8 border border-blue-200/50 shadow-xl",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-blue-900 mb-6 flex items-center gap-2",children:[e.jsx(D,{className:"w-6 h-6"}),"Parties"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(D,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Inventors"})]}),t.inventors&&t.inventors.length>0?e.jsx("ul",{className:"space-y-2",children:t.inventors.map((s,l)=>e.jsxs("li",{className:"text-slate-700 flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 mt-1",children:"â€¢"}),s]},l))}):e.jsx("p",{className:"text-slate-400 italic",children:"Not disclosed"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Q,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Assignees"})]}),t.assignees&&t.assignees.length>0?e.jsx("ul",{className:"space-y-2",children:t.assignees.map((s,l)=>e.jsxs("li",{className:"text-slate-700 flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 mt-1",children:"â€¢"}),s]},l))}):e.jsx("p",{className:"text-slate-400 italic",children:"Not disclosed"})]})]})]}),!!(t.cpcClasses?.length||t.ipcClasses?.length)&&e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/70 backdrop-blur-xl rounded-2xl p-8 border border-blue-200/50 shadow-xl",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-blue-900 mb-6 flex items-center gap-2",children:[e.jsx(O,{className:"w-6 h-6"}),"Classifications"]}),t.cpcClasses&&t.cpcClasses.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"CPC Classes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.cpcClasses.map((s,l)=>e.jsx("span",{className:"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm font-mono border border-blue-200",children:U(s)},l))})]}),t.ipcClasses&&t.ipcClasses.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"IPC Classes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.ipcClasses.map((s,l)=>e.jsx("span",{className:"px-3 py-1.5 bg-purple-50 text-purple-700 rounded-lg text-sm font-mono border border-purple-200",children:s},l))})]})]}),N&&e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white/70 backdrop-blur-xl rounded-2xl p-8 border border-blue-200/50 shadow-xl",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[e.jsx(S,{className:"w-6 h-6"}),"Abstract"]}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:`text-slate-700 leading-relaxed ${g?"":"line-clamp-5"}`,children:N}),N.length>300&&e.jsx("button",{onClick:()=>A(!g),className:"mt-3 text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1 transition-colors",children:g?e.jsxs(e.Fragment,{children:["Read less ",e.jsx(Z,{className:"w-4 h-4"})]}):e.jsxs(e.Fragment,{children:["Read more ",e.jsx(X,{className:"w-4 h-4"})]})})]})]}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(ee,{citationNetwork:t.citationNetwork||void 0,patentId:t.publicationNumber,source:t.source})}),e.jsx(G,{isOpen:I,onClose:()=>w(!1),type:"PATENT",externalId:t.publicationNumber,title:t.title,jurisdiction:t.jurisdiction,filingDate:t.filingDate,currentStatus:t.status,source:t.source,onTrackingSuccess:z})]})})]})})}export{Ne as PatentDetailPage};
