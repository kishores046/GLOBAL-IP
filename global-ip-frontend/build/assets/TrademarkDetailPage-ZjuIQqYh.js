import{y as M,u as P,r as l,i as m,j as e,b as j}from"./index-BbdKGyFO.js";import{S as N}from"./Sidebar-i27tk-Tt.js";import{m as x}from"./trademarkUtils-B7jiUD2Q.js";import{C as F,R as $,T as U,a as O}from"./TrackingModal-DsvBq6Mw.js";import{A as y}from"./arrow-left-CcfEOmOD.js";import{F as w}from"./file-text-CZhUgEQo.js";import{m as o}from"./proxy-D3LmmJeF.js";import{C as G}from"./check-DbG3oPzS.js";import{S as K}from"./star-B5e_Bjz_.js";import{C as V}from"./calendar-DIk46_Ka.js";import{B as W}from"./building-DYb4Ex7D.js";import"./users-D5aJHt4s.js";import"./search-BeavGINr.js";import"./chart-column-ulK0xHEq.js";import"./download-5qXpfTS0.js";import"./x-BD8jR-FZ.js";import"./circle-alert-DdFSup5D.js";import"./circle-check-big-CAMtQ4aA.js";function de(){const{trademarkId:r}=M(),u=P(),[a,p]=l.useState(null),[v,i]=l.useState(!0),[b,n]=l.useState(null),[h,g]=l.useState(!1),[C,k]=l.useState(!1),[T,f]=l.useState(!1),[d,I]=l.useState(!1);l.useEffect(()=>{D()},[r]);const S=s=>{console.error("Error loading trademark details:",s);const t=s.response?.status===404?"Trademark details are available only for items returned in search results.":"Failed to load trademark details. Please try again.";n(t)},D=async()=>{if(console.log("Loading trademark details for ID:",r),!r||r==="undefined"||r.trim()===""){console.error("Invalid trademark ID in URL params:",r),n("Invalid trademark ID. Please return to search results and try again."),i(!1);return}i(!0),n(null);try{console.log("Fetching trademark from API:",`/trademarks/${r}`);const s=await m.getDetail(r);console.log("Trademark data received:",s),p(s)}catch(s){console.error("Error loading trademark:",s),console.error("Error response:",s.response?.data),console.error("Error status:",s.response?.status),S(s)}finally{i(!1)}},E=async s=>{const t=a?.trademarkId||a?.id;if(!t)throw new Error("Trademark ID is missing");const c=a.source||"TMVIEW";console.log("Updating bookmark:",{trademarkId:t,bookmarked:s,source:c}),s?(console.log("Removing bookmark for:",t),await m.unbookmark(t)):(console.log("Adding bookmark for:",t,"with source:",c),await m.bookmark(t,c))},L=async()=>{if(a){g(!0);try{console.log("Toggle bookmark - Current state:",a.bookmarked),await E(a.bookmarked),p({...a,bookmarked:!a.bookmarked}),console.log("Bookmark toggled successfully")}catch(s){console.error("Error toggling bookmark:",s),console.error("Error response:",s.response?.data),console.error("Error status:",s.response?.status);const t=s.response?.data?.message||"Failed to update bookmark. Please try again.";alert(t)}finally{g(!1)}}},A=()=>{if(a){const s=a.trademarkId||a.id||"";navigator.clipboard.writeText(s),k(!0),setTimeout(()=>k(!1),2e3)}},R=()=>{I(!0)},B=s=>{if(!s)return"—";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return s}};return v?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-blue-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(j,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading trademark details..."})]})}):b||!a?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-blue-100",children:e.jsxs("div",{className:"flex",children:[e.jsx(N,{}),e.jsx("main",{className:"flex-1 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("button",{onClick:()=>u(-1),className:"mb-6 flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors",children:[e.jsx(y,{className:"w-5 h-5"}),"Back to Results"]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-xl rounded-2xl p-12 border border-red-200 shadow-lg text-center",children:[e.jsx(w,{className:"w-16 h-16 text-red-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-2",children:"Error Loading Trademark"}),e.jsx("p",{className:"text-slate-600",children:b})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-blue-100",children:e.jsxs("div",{className:"flex",children:[e.jsx(N,{}),e.jsx("main",{className:"flex-1 p-8 overflow-y-auto",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsxs("button",{onClick:()=>u(-1),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors",children:[e.jsx(y,{className:"w-5 h-5"}),"Back to Results"]}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-xl rounded-2xl p-8 border border-blue-200/50 shadow-xl",children:e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-900 mb-3",children:a.markName||"Trademark Details"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-xl text-slate-700 font-mono font-medium",children:a.trademarkId||a.id}),e.jsx("button",{onClick:A,className:"p-2 hover:bg-blue-100 rounded-lg transition-colors",title:"Copy trademark ID",children:C?e.jsx(G,{className:"w-4 h-4 text-green-600"}):e.jsx(F,{className:"w-4 h-4 text-slate-500"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jurisdiction&&e.jsx("span",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:a.jurisdiction}),a.statusCode&&(()=>{const s=x(a.statusCode,a.statusCode);return e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${s.badgeColor}`,title:s.description,children:s.displayLabel})})(),a.source&&e.jsx("span",{className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium",children:a.source})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>f(!0),disabled:d,className:`px-4 py-3 rounded-xl transition-all shadow-md hover:shadow-lg font-medium text-sm flex items-center gap-2 ${d?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700 hover:bg-purple-200"} disabled:opacity-50`,title:"Track this trademark's lifecycle",children:[e.jsx($,{className:"w-4 h-4"}),d?"Tracking Enabled":"Track Trademark"]}),e.jsx("button",{onClick:L,disabled:h,className:`p-4 rounded-xl transition-all shadow-md hover:shadow-lg ${a.bookmarked?"bg-yellow-100 text-yellow-600 hover:bg-yellow-200":"bg-slate-100 text-slate-400 hover:bg-slate-200"} disabled:opacity-50`,title:a.bookmarked?"Remove bookmark":"Add bookmark",children:h?e.jsx(j,{className:"w-6 h-6 animate-spin"}):e.jsx(K,{className:`w-6 h-6 ${a.bookmarked?"fill-current":""}`})})]})]})}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/70 backdrop-blur-xl rounded-2xl p-8 border border-blue-200/50 shadow-xl",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-blue-900 mb-6 flex items-center gap-2",children:[e.jsx(V,{className:"w-6 h-6"}),"Metadata"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Filing Date"}),e.jsx("p",{className:"text-slate-900 font-medium",children:B(a.filingDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Status"}),e.jsx("p",{className:"text-slate-900 font-medium",children:a.statusCode?(()=>{const s=x(a.statusCode,a.statusCode);return e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm ${s.badgeColor}`,title:s.description,children:s.displayLabel})})():"—"})]})]})]}),a.owners&&a.owners.length>0&&e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/70 backdrop-blur-xl rounded-2xl p-8 border border-blue-200/50 shadow-xl",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-blue-900 mb-6 flex items-center gap-2",children:[e.jsx(W,{className:"w-6 h-6"}),"Owners"]}),e.jsx("ul",{className:"space-y-2",children:a.owners.map((s,t)=>e.jsxs("li",{className:"text-slate-700 flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 mt-1",children:"•"}),s]},t))})]}),a.internationalClasses&&a.internationalClasses.length>0&&e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/70 backdrop-blur-xl rounded-2xl p-8 border border-blue-200/50 shadow-xl",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-blue-900 mb-6 flex items-center gap-2",children:[e.jsx(U,{className:"w-6 h-6"}),"International Classes"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.internationalClasses.map((s,t)=>e.jsx("span",{className:"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm font-mono border border-blue-200",children:s},t))})]}),a.goodsAndServices&&e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white/70 backdrop-blur-xl rounded-2xl p-8 border border-blue-200/50 shadow-xl",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[e.jsx(w,{className:"w-6 h-6"}),"Goods and Services"]}),e.jsx("p",{className:"text-slate-700 leading-relaxed whitespace-pre-wrap",children:a.goodsAndServices})]}),e.jsx(O,{isOpen:T,onClose:()=>f(!1),type:"TRADEMARK",externalId:a.trademarkId||a.id||"",title:a.mark,jurisdiction:a.jurisdiction,filingDate:a.filingDate,currentStatus:x(a.status),source:a.source,onTrackingSuccess:R})]})})]})})}export{de as TrademarkDetailPage};
