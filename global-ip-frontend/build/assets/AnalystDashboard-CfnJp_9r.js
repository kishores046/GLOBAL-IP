import{e as T,u as B,r as t,g as E,h as b,j as e,p as I,i as F}from"./index-BbdKGyFO.js";import{D as R}from"./DashboardHeader-CK3555d_.js";import{S as V,N as L}from"./Sidebar-i27tk-Tt.js";import{S as O}from"./search-BeavGINr.js";import{F as M}from"./file-text-CZhUgEQo.js";import{R as z,C as J,X as G,Y as U,T as Y}from"./generateCategoricalChart-ErmswnlQ.js";import{A as K,a as W}from"./AreaChart-CL330nU1.js";import{S as u}from"./star-B5e_Bjz_.js";import{T as j}from"./trash-2-BS5v2fAb.js";import{C as k}from"./calendar-DIk46_Ka.js";import{E as p}from"./eye-C4i9w_9f.js";import"./users-D5aJHt4s.js";import"./chevron-down-CAl0sHJA.js";import"./globe-CjcR3HKJ.js";import"./chart-column-ulK0xHEq.js";import"./download-5qXpfTS0.js";import"./clsx-B-dksMZM.js";import"./string-cKWu9XK9.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],i=T("flag",X);function xe(){const n=B(),[o,d]=t.useState([]),[r,c]=t.useState([]),[m,N]=t.useState(!0),[g,x]=t.useState(0),[v,f]=t.useState(!0);t.useEffect(()=>{y(),w()},[]);const w=async()=>{try{const s=await E.getAnalystSearchCount();x(s)}catch(s){console.error("Error loading search count:",s),x(0)}finally{f(!1)}},y=async()=>{try{const[s,a]=await Promise.all([b.getBookmarkedPatents(),b.getBookmarkedTrademarks()]);console.log("Loaded bookmarked trademarks:",a),a.length>0&&(console.log("First bookmarked trademark:",a[0]),console.log("Trademark fields:",Object.keys(a[0]))),d(s),c(a)}catch(s){console.error("Error loading bookmarks:",s)}finally{N(!1)}},C=async s=>{try{await I.unbookmark(s),d(o.filter(a=>a.publicationNumber!==s))}catch(a){console.error("Error removing bookmark:",a),alert("Failed to remove bookmark. Please try again.")}},S=s=>{n(`/patents/${s}`)},D=s=>{n(`/trademarks/${s}`)},A=async s=>{if(console.log("Attempting to remove bookmark for trademark ID:",s),!s||s==="undefined"){console.error("Invalid trademark ID provided:",s),alert("Cannot remove bookmark: Invalid trademark ID");return}try{await F.unbookmark(s),c(r.filter(a=>a.trademarkId!==s))}catch(a){console.error("Error removing trademark bookmark:",a);const h=a.response?.data?.error||a.response?.data?.message||a.message;h?.includes("EntityManager")||h?.includes("transaction")?alert("Backend transaction error. Please contact the administrator to add @Transactional annotation to the unbookmark method."):a.response?.status===403?alert("You don't have permission to remove this bookmark."):alert("Failed to remove trademark bookmark. Please try again.")}},l=s=>{if(!s)return"â€”";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return s}},P=[{month:"Jan",value:120},{month:"Feb",value:145},{month:"Mar",value:135},{month:"Apr",value:160},{month:"May",value:175},{month:"Jun",value:190},{month:"Jul",value:180},{month:"Aug",value:210},{month:"Sep",value:220},{month:"Oct",value:200},{month:"Nov",value:240},{month:"Dec",value:260}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-blue-100",children:[e.jsx(R,{userName:"Analyst"}),e.jsxs("div",{className:"flex",children:[e.jsx(V,{}),e.jsx("main",{className:"flex-1 p-8 overflow-y-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl text-blue-900 mb-2",children:"Analyst Dashboard"}),e.jsx("p",{className:"text-slate-600",children:"Overview of your IP analysis activity"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-blue-200 shadow-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-600 rounded-lg mb-4",children:e.jsx(O,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"text-4xl text-blue-900 mb-2",children:v?"...":g}),e.jsx("div",{className:"text-slate-600",children:"Search Queries"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-blue-200 shadow-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-600 rounded-lg mb-4",children:e.jsx(L,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"text-4xl text-blue-900 mb-2",children:"0"}),e.jsx("div",{className:"text-slate-600",children:"Visualization Graphs"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-blue-200 shadow-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-600 rounded-lg mb-4",children:e.jsx(i,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"text-4xl text-blue-900 mb-2",children:"0"}),e.jsx("div",{className:"text-slate-600",children:"Tracked Competitors"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-blue-200 shadow-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-600 rounded-lg mb-4",children:e.jsx(M,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"text-4xl text-blue-900 mb-2",children:"0"}),e.jsx("div",{className:"text-slate-600",children:"Exports This Week"})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-blue-200 shadow-lg p-6",children:[e.jsx("h2",{className:"text-2xl text-blue-900 mb-6",children:"Competitor Portfolio Trends"}),e.jsx("div",{className:"h-80",children:e.jsx(z,{width:"100%",height:"100%",children:e.jsxs(K,{data:P,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.05})]})}),e.jsx(J,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(G,{dataKey:"month",stroke:"#6b7280",style:{fontSize:"12px"}}),e.jsx(U,{stroke:"#6b7280",style:{fontSize:"12px"},domain:[0,300],ticks:[0,100,200,300]}),e.jsx(Y,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e.jsx(W,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:3,fillOpacity:1,fill:"url(#colorValue)"})]})})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-blue-200 shadow-lg p-6",children:[e.jsxs("h2",{className:"text-2xl text-blue-900 mb-6 flex items-center gap-2",children:[e.jsx(u,{className:"w-6 h-6"}),"Bookmarked Patents"]}),m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-slate-600",children:"Loading bookmarks..."})}):o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(u,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 text-lg mb-2",children:"No Bookmarked Patents"}),e.jsx("p",{className:"text-slate-400",children:"Patents you bookmark will appear here"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(s=>e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-1 line-clamp-2",children:s.title||"Untitled Patent"}),e.jsx("p",{className:"text-sm text-slate-600 font-mono",children:s.publicationNumber})]}),e.jsx("button",{onClick:()=>C(s.publicationNumber),className:"text-red-500 hover:text-red-600 transition-colors p-1",title:"Remove bookmark",children:e.jsx(j,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[s.assignee&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Assignee:"})," ",e.jsx("span",{className:"text-slate-700",children:s.assignee})]}),s.publicationDate&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Published:"})," ",e.jsx("span",{className:"text-slate-700",children:l(s.publicationDate)})]}),s.bookmarkedAt&&e.jsxs("div",{className:"text-sm flex items-center gap-1 text-slate-500",children:[e.jsx(k,{className:"w-3 h-3"}),e.jsxs("span",{children:["Bookmarked ",l(s.bookmarkedAt)]})]})]}),e.jsxs("button",{onClick:()=>S(s.publicationNumber),className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[e.jsx(p,{className:"w-4 h-4"}),"View Details"]})]},s.publicationNumber))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-900 flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5 text-blue-600"}),"Bookmarked Trademarks"]}),e.jsxs("span",{className:"text-sm text-slate-500",children:[r.length," trademark",r.length!==1?"s":""]})]}),m?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-slate-600 mt-4",children:"Loading bookmarks..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(i,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 mb-2",children:"No bookmarked trademarks yet"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Bookmark trademarks to track them here"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(s=>e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-1 line-clamp-2",children:s.markName||"Unnamed Trademark"}),e.jsx("p",{className:"text-sm text-slate-600 font-mono",children:s.trademarkId})]}),e.jsx("button",{onClick:()=>A(s.trademarkId),className:"text-red-500 hover:text-red-600 transition-colors p-1",title:"Remove bookmark",children:e.jsx(j,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[s.jurisdiction&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Jurisdiction:"})," ",e.jsx("span",{className:"text-slate-700",children:s.jurisdiction})]}),s.statusCode&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Status:"})," ",e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:s.statusCode})]}),s.filingDate&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Filed:"})," ",e.jsx("span",{className:"text-slate-700",children:l(s.filingDate)})]}),s.bookmarkedAt&&e.jsxs("div",{className:"text-sm flex items-center gap-1 text-slate-500",children:[e.jsx(k,{className:"w-3 h-3"}),e.jsxs("span",{children:["Bookmarked ",l(s.bookmarkedAt)]})]})]}),e.jsxs("button",{onClick:()=>D(s.trademarkId),className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[e.jsx(p,{className:"w-4 h-4"}),"View Details"]})]},s.trademarkId))})]})]})})]})]})}export{xe as AnalystDashboard};
